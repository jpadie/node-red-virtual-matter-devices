{
  "version": 3,
  "sources": ["../../../src/util/NamedHandler.ts"],
  "sourcesContent": ["/**\n * @license\n * Copyright 2022-2024 Matter.js Authors\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport type HandlerFunction = (...args: any[]) => any;\n\nexport class NamedHandler<H extends Record<keyof H, HandlerFunction>> {\n    private handler: { action: keyof H; handler: H[keyof H] }[] = [];\n\n    hasHandler<K extends keyof H>(action: K) {\n        return this.handler.some(({ action: a }) => a === action);\n    }\n\n    addHandler<K extends keyof H>(action: K, handler: H[K]) {\n        this.handler.push({ action, handler });\n    }\n\n    async executeHandler<K extends keyof H>(action: K, ...args: Parameters<H[K]>) {\n        for (const { action: a, handler } of this.handler) {\n            if (a === action) {\n                return await handler(...args);\n            }\n        }\n    }\n\n    removeHandler<K extends keyof H>(action: K, handler: H[K]) {\n        this.handler = this.handler.filter(({ action: a, handler: h }) => {\n            return a !== action && h !== handler;\n        });\n    }\n}\n\ntype ExtendPublicHandlerMethods<\n    ParentClass extends new (...args: any[]) => any,\n    H extends Record<keyof H, HandlerFunction>,\n> = ParentClass extends new (...args: infer TArgs) => infer T\n    ? new (...args: TArgs) => T & {\n          addCommandHandler<K extends keyof H>(action: K, handler: H[K]): void;\n          removeCommandHandler<K extends keyof H>(action: K, handler: H[K]): void;\n          _executeHandler<K extends keyof H>(action: K, ...args: Parameters<H[K]>): Promise<void>;\n      }\n    : never;\n\nexport function extendPublicHandlerMethods<\n    ParentClass extends new (...args: any[]) => any,\n    H extends Record<keyof H, HandlerFunction>,\n>(parentClass: ParentClass): ExtendPublicHandlerMethods<ParentClass, H> {\n    // This is a type-level cheat\n    return parentClass as any;\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQO,MAAM,aAAyD;AAAA,EAC1D,UAAsD,CAAC;AAAA,EAE/D,WAA8B,QAAW;AACrC,WAAO,KAAK,QAAQ,KAAK,CAAC,EAAE,QAAQ,EAAE,MAAM,MAAM,MAAM;AAAA,EAC5D;AAAA,EAEA,WAA8B,QAAW,SAAe;AACpD,SAAK,QAAQ,KAAK,EAAE,QAAQ,QAAQ,CAAC;AAAA,EACzC;AAAA,EAEA,MAAM,eAAkC,WAAc,MAAwB;AAC1E,eAAW,EAAE,QAAQ,GAAG,QAAQ,KAAK,KAAK,SAAS;AAC/C,UAAI,MAAM,QAAQ;AACd,eAAO,MAAM,QAAQ,GAAG,IAAI;AAAA,MAChC;AAAA,IACJ;AAAA,EACJ;AAAA,EAEA,cAAiC,QAAW,SAAe;AACvD,SAAK,UAAU,KAAK,QAAQ,OAAO,CAAC,EAAE,QAAQ,GAAG,SAAS,EAAE,MAAM;AAC9D,aAAO,MAAM,UAAU,MAAM;AAAA,IACjC,CAAC;AAAA,EACL;AACJ;AAaO,SAAS,2BAGd,aAAsE;AAEpE,SAAO;AACX;",
  "names": []
}
